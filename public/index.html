<html>
    <head>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
        <script>
            function invalidateImage(id, img_name) {
                const img = document.getElementById(id);
                img.src = `https://screenshot1.blob.core.windows.net/images/Emulator/${img_name}.jpg?q=`+Date.now();
            }
            var socket = io('/receive');
            socket.on('notification', function(data) {
                console.log(data);
                if (data.id === "456") {
                    invalidateImage("image2", "image2");
                } else {
                    invalidateImage("image3", "image2");
                }
            });
            function send(status) {
                axios.post('/update', {
                    status
                }).then(function(res) {
                    console.log(res)
                    const invalidate = () => invalidateImage("image1", "image1");
                    setTimeout(invalidate, 1500);
                    setTimeout(invalidate, 4000);
                    setTimeout(invalidate, 10000);
                }).catch(function(err) {
                    console.error(err);
                })
            }
        </script>
    </head>
    <body>
        <div>
            <img width="400", height="225" id="image1" src="https://screenshot1.blob.core.windows.net/images/Emulator/image1.jpg" />
            <img width="400", height="225" id="image2" src="https://screenshot1.blob.core.windows.net/images/Emulator/image2.jpg" />
            <img width="400", height="225" id="image3" src="https://screenshot1.blob.core.windows.net/images/Emulator/image2.jpg" />

        </div>
        <div>
            <button onclick="send('up')">up</button>
            <button onclick="send('down')">down</button>

            <button onclick="send('left')">left</button>
            <button onclick="send('right')">right</button>

            <button onclick="send('f1')">f1</button>

            <button onclick="send('enter')">enter</button>

            <button onclick="send('esc')">esc</button>
        </div>
    </body>
</html>